
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Knowledge base with Markdown, MkDocs & GitHub Pages">
      
      
      
        <meta name="author" content="rwxd">
      
      
        <link rel="canonical" href="https://wiki.rwxd.eu/Networking/FRR/Deploy%20VXLAN%20%26%20EVPN/">
      
      <link rel="icon" href="../../../assets/page/favicon-32x32.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.6">
    
    
      
        <title>Deploy VXLAN & EVPN with FRR - Knowledge base</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.802231af.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,400,400i,700%7CFira+Code&display=fallback">
        <style>:root{--md-text-font-family:"Inter";--md-code-font-family:"Fira Code"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <script>function __prefix(e){return new URL("../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#deploy-vxlan-evpn-with-frr" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Knowledge base" class="md-header__button md-logo" aria-label="Knowledge base" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 3v15h3V3H9m3 2 4 13 3-1-4-13-3 1M5 5v13h3V5H5M3 19v2h18v-2H3z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Knowledge base
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Deploy VXLAN & EVPN with FRR
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 10a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2 2 2 0 0 1 2-2m10-3a5 5 0 0 1 5 5 5 5 0 0 1-5 5H7a5 5 0 0 1-5-5 5 5 0 0 1 5-5h10M7 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3h10a3 3 0 0 0 3-3 3 3 0 0 0-3-3H7z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/rwxd/wiki/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    wiki
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Knowledge base" class="md-nav__button md-logo" aria-label="Knowledge base" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 3v15h3V3H9m3 2 4 13 3-1-4-13-3 1M5 5v13h3V5H5M3 19v2h18v-2H3z"/></svg>

    </a>
    Knowledge base
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/rwxd/wiki/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    wiki
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../Podcasts/" class="md-nav__link">
        Podcasts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../Research-Papers/" class="md-nav__link">
        Research Papers
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Blog
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Blog" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Blog
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" >
      
      <label class="md-nav__link" for="__nav_4_1">
        Misc
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Misc" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          Misc
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Blog/Misc/blog-gh-pages-mkdocs/" class="md-nav__link">
        How to create a blog with GitHub Pages and MkDocs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Blog/Misc/pluralsight_trial/" class="md-nav__link">
        Pluralsight demo / trial
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Books
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Books" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Books
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Books/books.md/" class="md-nav__link">
        Books
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Cloud
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Cloud" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Cloud
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1" type="checkbox" id="__nav_6_1" >
      
      <label class="md-nav__link" for="__nav_6_1">
        NSX T
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="NSX T" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          NSX T
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Cloud/NSX-T/Edge%20Technology/" class="md-nav__link">
        NSX-T Edge Technology
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Cloud/NSX-T/NSX-T-Architecture/" class="md-nav__link">
        NSX-T Architecture
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Cloud/NSX-T/NSX-T-Control-Plane/" class="md-nav__link">
        NSX-T Control Plane
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Cloud/NSX-T/NSX-T-Data-Plane/" class="md-nav__link">
        NSX-T Data Plane
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Cloud/NSX-T/NSX-T-Management-Plane/" class="md-nav__link">
        NSX-T Management Plane
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Cloud/NSX-T/NSX-T-Profiles/" class="md-nav__link">
        NSX-T Profiles
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Cloud/NSX-T/Single-Tier-Routing/" class="md-nav__link">
        What is Single-tier routing?
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Cloud/NSX-T/Transport-Zones/" class="md-nav__link">
        NSX-T Transport Zones
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Cloud/NSX-T/Two-Tier-Routing/" class="md-nav__link">
        What is Two Tier Routing?
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      <label class="md-nav__link" for="__nav_7">
        DevOps
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="DevOps" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          DevOps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1" type="checkbox" id="__nav_7_1" >
      
      <label class="md-nav__link" for="__nav_7_1">
        Continuous Integration
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Continuous Integration" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_1">
          <span class="md-nav__icon md-icon"></span>
          Continuous Integration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_1" type="checkbox" id="__nav_7_1_1" >
      
      <label class="md-nav__link" for="__nav_7_1_1">
        Formatters
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Formatters" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_1">
          <span class="md-nav__icon md-icon"></span>
          Formatters
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../DevOps/Continuous-Integration/Formatters/Black/" class="md-nav__link">
        Black
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_2" type="checkbox" id="__nav_7_1_2" >
      
      <label class="md-nav__link" for="__nav_7_1_2">
        GitLab CICD
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="GitLab CICD" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_2">
          <span class="md-nav__icon md-icon"></span>
          GitLab CICD
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../DevOps/Continuous-Integration/GitLab-CICD/clear_artifacts/" class="md-nav__link">
        Script to clear GitLab CI/CD Artifacts
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_1_3" type="checkbox" id="__nav_7_1_3" >
      
      <label class="md-nav__link" for="__nav_7_1_3">
        Type Checkers
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Type Checkers" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_1_3">
          <span class="md-nav__icon md-icon"></span>
          Type Checkers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../DevOps/Continuous-Integration/Type-Checkers/MyPy/" class="md-nav__link">
        MyPy
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2" type="checkbox" id="__nav_7_2" >
      
      <label class="md-nav__link" for="__nav_7_2">
        Infrastructure Solutions
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Infrastructure Solutions" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_2">
          <span class="md-nav__icon md-icon"></span>
          Infrastructure Solutions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_1" type="checkbox" id="__nav_7_2_1" >
      
      <label class="md-nav__link" for="__nav_7_2_1">
        Container
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Container" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_2_1">
          <span class="md-nav__icon md-icon"></span>
          Container
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_1_1" type="checkbox" id="__nav_7_2_1_1" >
      
      <label class="md-nav__link" for="__nav_7_2_1_1">
        Docker
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Docker" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_2_1_1">
          <span class="md-nav__icon md-icon"></span>
          Docker
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../DevOps/Infrastructure-Solutions/Container/Docker/docker%20commands/" class="md-nav__link">
        Docker commands
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_1_2" type="checkbox" id="__nav_7_2_1_2" >
      
      <label class="md-nav__link" for="__nav_7_2_1_2">
        Kubernetes
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Kubernetes" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_2_1_2">
          <span class="md-nav__icon md-icon"></span>
          Kubernetes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_1_2_1" type="checkbox" id="__nav_7_2_1_2_1" >
      
      <label class="md-nav__link" for="__nav_7_2_1_2_1">
        K3S
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="K3S" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_2_1_2_1">
          <span class="md-nav__icon md-icon"></span>
          K3S
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../DevOps/Infrastructure-Solutions/Container/Kubernetes/K3S/install/" class="md-nav__link">
        Install
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../DevOps/Infrastructure-Solutions/Container/Kubernetes/K3S/raspberry/" class="md-nav__link">
        Raspberry
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_1_2_2" type="checkbox" id="__nav_7_2_1_2_2" >
      
      <label class="md-nav__link" for="__nav_7_2_1_2_2">
        Networking
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Networking" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_2_1_2_2">
          <span class="md-nav__icon md-icon"></span>
          Networking
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../DevOps/Infrastructure-Solutions/Container/Kubernetes/Networking/kube-vip/" class="md-nav__link">
        Kube-VIP
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../DevOps/Infrastructure-Solutions/Container/Kubernetes/Networking/metallb/" class="md-nav__link">
        MetalLB
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_1_2_3" type="checkbox" id="__nav_7_2_1_2_3" >
      
      <label class="md-nav__link" for="__nav_7_2_1_2_3">
        Tanzu Kubernetes Cluster
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Tanzu Kubernetes Cluster" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_2_1_2_3">
          <span class="md-nav__icon md-icon"></span>
          Tanzu Kubernetes Cluster
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../DevOps/Infrastructure-Solutions/Container/Kubernetes/Tanzu-Kubernetes-Cluster/kubectl-vsphere/" class="md-nav__link">
        Kubectl vSphere
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_1_2_4" type="checkbox" id="__nav_7_2_1_2_4" >
      
      <label class="md-nav__link" for="__nav_7_2_1_2_4">
        Kubectl
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Kubectl" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_2_1_2_4">
          <span class="md-nav__icon md-icon"></span>
          Kubectl
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../DevOps/Infrastructure-Solutions/Container/Kubernetes/kubectl/CronJob/" class="md-nav__link">
        Test CronJob
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../DevOps/Infrastructure-Solutions/Container/Kubernetes/kubectl/busybox/" class="md-nav__link">
        Busybox
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../DevOps/Infrastructure-Solutions/Container/Kubernetes/kubectl/delete/" class="md-nav__link">
        delete pods
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../DevOps/Infrastructure-Solutions/Container/Kubernetes/kubectl/label/" class="md-nav__link">
        nodes
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../DevOps/Infrastructure-Solutions/Container/Kubernetes/kubectl/serviceaccount/" class="md-nav__link">
        ServiceAccounts
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_1_3" type="checkbox" id="__nav_7_2_1_3" >
      
      <label class="md-nav__link" for="__nav_7_2_1_3">
        Additional
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Additional" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_2_1_3">
          <span class="md-nav__icon md-icon"></span>
          Additional
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_1_3_1" type="checkbox" id="__nav_7_2_1_3_1" >
      
      <label class="md-nav__link" for="__nav_7_2_1_3_1">
        Traefik
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Traefik" data-md-level="5">
        <label class="md-nav__title" for="__nav_7_2_1_3_1">
          <span class="md-nav__icon md-icon"></span>
          Traefik
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../DevOps/Infrastructure-Solutions/Container/additional/Traefik/Excluding/" class="md-nav__link">
        Excluding
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../DevOps/Infrastructure-Solutions/Container/additional/Traefik/External%20Services/" class="md-nav__link">
        External Services
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_3" type="checkbox" id="__nav_7_3" >
      
      <label class="md-nav__link" for="__nav_7_3">
        Infrastructure as Code
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Infrastructure as Code" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_3">
          <span class="md-nav__icon md-icon"></span>
          Infrastructure as Code
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../DevOps/Infrastructure-as-Code/Ansible/" class="md-nav__link">
        Ansible
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../DevOps/Infrastructure-as-Code/Helm/" class="md-nav__link">
        Helm
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      <label class="md-nav__link" for="__nav_8">
        Economy
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Economy" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Economy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Economy/Investing/" class="md-nav__link">
        Investing
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" checked>
      
      <label class="md-nav__link" for="__nav_9">
        Networking
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Networking" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Networking
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_1" type="checkbox" id="__nav_9_1" >
      
      <label class="md-nav__link" for="__nav_9_1">
        Cumulus
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Cumulus" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_1">
          <span class="md-nav__icon md-icon"></span>
          Cumulus
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Cumulus/Cumulus%20Fabric%20with%20VXLAN%20EVPN%20%26%20BGP/" class="md-nav__link">
        Cumulus Fabric with VXLAN EVPN & BGP
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Cumulus/NVIDIA%20AIR/" class="md-nav__link">
        NVIDIA AIR
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2" type="checkbox" id="__nav_9_2" >
      
      <label class="md-nav__link" for="__nav_9_2">
        EVE NG
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="EVE NG" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_2">
          <span class="md-nav__icon md-icon"></span>
          EVE NG
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../EVE-NG/KVM%20Setup/" class="md-nav__link">
        KVM Setup for EVE-NG
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_3" type="checkbox" id="__nav_9_3" checked>
      
      <label class="md-nav__link" for="__nav_9_3">
        FRR
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="FRR" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_3">
          <span class="md-nav__icon md-icon"></span>
          FRR
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Deploy VXLAN & EVPN with FRR
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Deploy VXLAN & EVPN with FRR
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#local-configuration" class="md-nav__link">
    Local Configuration
  </a>
  
    <nav class="md-nav" aria-label="Local Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leaf01" class="md-nav__link">
    leaf01
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exit01" class="md-nav__link">
    exit01
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#single-ebgp-session" class="md-nav__link">
    Single eBGP Session
  </a>
  
    <nav class="md-nav" aria-label="Single eBGP Session">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spine01" class="md-nav__link">
    spine01
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leaf01_1" class="md-nav__link">
    leaf01
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exit01_1" class="md-nav__link">
    exit01
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vxlan-setup" class="md-nav__link">
    VXLAN Setup
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_4" type="checkbox" id="__nav_9_4" >
      
      <label class="md-nav__link" for="__nav_9_4">
        General
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="General" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_4">
          <span class="md-nav__icon md-icon"></span>
          General
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../General/NETCONF/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_4_2" type="checkbox" id="__nav_9_4_2" >
      
      <label class="md-nav__link" for="__nav_9_4_2">
        OSI Layers
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="OSI Layers" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_4_2">
          <span class="md-nav__icon md-icon"></span>
          OSI Layers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../General/OSI-Layers/OSI%20Layer-1/" class="md-nav__link">
        Overview OSI Layer-1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../General/OSI-Layers/OSI%20Layer-2/" class="md-nav__link">
        Overview OSI Layer-2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../General/OSI-Layers/OSI%20Layer-3/" class="md-nav__link">
        Overview OSI Layer-3
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_5" type="checkbox" id="__nav_9_5" >
      
      <label class="md-nav__link" for="__nav_9_5">
        JunOS
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="JunOS" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_5">
          <span class="md-nav__icon md-icon"></span>
          JunOS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../JunOS/Juniper%20Device%20Architecture/" class="md-nav__link">
        Juniper's architecture
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_6" type="checkbox" id="__nav_9_6" >
      
      <label class="md-nav__link" for="__nav_9_6">
        Routing
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Routing" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_6">
          <span class="md-nav__icon md-icon"></span>
          Routing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_6_1" type="checkbox" id="__nav_9_6_1" >
      
      <label class="md-nav__link" for="__nav_9_6_1">
        BGP
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="BGP" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_6_1">
          <span class="md-nav__icon md-icon"></span>
          BGP
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Routing/BGP/BGP%20-%20General/" class="md-nav__link">
        About BGP
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Routing/BGP/BGP%20Best-Path%20Computation/" class="md-nav__link">
        BGP Best Path Computation
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Routing/BGP/BGP%20Communities/" class="md-nav__link">
        BGP Communities
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Routing/BGP/BGP%20Messages/" class="md-nav__link">
        BGP Messages
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Routing/BGP/BGP%20Multiple%20Protocol%20Support/" class="md-nav__link">
        BGP Multiple Protocol Support
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Routing/BGP/BGP%20Path%20Attributes/" class="md-nav__link">
        BGP Path Attributes
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Routing/BGP/BGP%20Route%20Reflector/" class="md-nav__link">
        BGP Route Reflector
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Routing/BGP/eBGP/" class="md-nav__link">
        eBGP
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Routing/BGP/iBGP/" class="md-nav__link">
        iBGP
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_6_1_10" type="checkbox" id="__nav_9_6_1_10" >
      
      <label class="md-nav__link" for="__nav_9_6_1_10">
        BGP EVPN
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="BGP EVPN" data-md-level="4">
        <label class="md-nav__title" for="__nav_9_6_1_10">
          <span class="md-nav__icon md-icon"></span>
          BGP EVPN
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Routing/BGP/BGP%20EVPN/ARP%20ND%20Suppresion/" class="md-nav__link">
        ARP/ND Suppression
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Routing/BGP/BGP%20EVPN/BGP%20EVPN%20-%20General/" class="md-nav__link">
        BGP EVPN
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Routing/BGP/BGP%20EVPN/EVPN%20Route%20Types/" class="md-nav__link">
        EVPN Route Types
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Routing/BGP/BGP%20EVPN/Route%20Advertisements/" class="md-nav__link">
        EVPN Route Advertisements
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_6_1_10_5" type="checkbox" id="__nav_9_6_1_10_5" >
      
      <label class="md-nav__link" for="__nav_9_6_1_10_5">
        EVPN Bridging
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="EVPN Bridging" data-md-level="5">
        <label class="md-nav__title" for="__nav_9_6_1_10_5">
          <span class="md-nav__icon md-icon"></span>
          EVPN Bridging
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Routing/BGP/BGP%20EVPN/EVPN%20Bridging/EVPN%20and%20Bridging/" class="md-nav__link">
        How EVPN replaces the 802.Q flood-and-learn
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_7" type="checkbox" id="__nav_9_7" >
      
      <label class="md-nav__link" for="__nav_9_7">
        Virtualization
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Virtualization" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_7">
          <span class="md-nav__icon md-icon"></span>
          Virtualization
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Virtualization/Network%20Virtualization/" class="md-nav__link">
        Network Virtualization
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_7_2" type="checkbox" id="__nav_9_7_2" >
      
      <label class="md-nav__link" for="__nav_9_7_2">
        VXLAN
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="VXLAN" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_7_2">
          <span class="md-nav__icon md-icon"></span>
          VXLAN
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../Virtualization/VXLAN/VXLAN%20-%20General/" class="md-nav__link">
        What is VXLAN?
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      <label class="md-nav__link" for="__nav_10">
        Operating Systems
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Operating Systems" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Operating Systems
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_1" type="checkbox" id="__nav_10_1" >
      
      <label class="md-nav__link" for="__nav_10_1">
        Linux
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Linux" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_1">
          <span class="md-nav__icon md-icon"></span>
          Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_1_1" type="checkbox" id="__nav_10_1_1" >
      
      <label class="md-nav__link" for="__nav_10_1_1">
        CLI
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="CLI" data-md-level="3">
        <label class="md-nav__title" for="__nav_10_1_1">
          <span class="md-nav__icon md-icon"></span>
          CLI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Operating-Systems/Linux/CLI/tee/" class="md-nav__link">
        Tee
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Operating-Systems/Linux/CLI/watch/" class="md-nav__link">
        watch
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_1_2" type="checkbox" id="__nav_10_1_2" >
      
      <label class="md-nav__link" for="__nav_10_1_2">
        Networking
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Networking" data-md-level="3">
        <label class="md-nav__title" for="__nav_10_1_2">
          <span class="md-nav__icon md-icon"></span>
          Networking
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Operating-Systems/Linux/Networking/Bridge%20Interface/" class="md-nav__link">
        Create a bridge interface
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_1_3" type="checkbox" id="__nav_10_1_3" >
      
      <label class="md-nav__link" for="__nav_10_1_3">
        PulseAudio
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="PulseAudio" data-md-level="3">
        <label class="md-nav__title" for="__nav_10_1_3">
          <span class="md-nav__icon md-icon"></span>
          PulseAudio
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Operating-Systems/Linux/PulseAudio/Volume/" class="md-nav__link">
        Volume
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      <label class="md-nav__link" for="__nav_11">
        Other
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Other" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Other
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Other/20%20rules%20of%20formulating%20knowledge/" class="md-nav__link">
        20 rules of formulating knowledge
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Other/digital-gardening/" class="md-nav__link">
        Digital Gardening
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      <label class="md-nav__link" for="__nav_12">
        Politics
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Politics" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          Politics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Politics/Resources/" class="md-nav__link">
        Politics resources
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13" type="checkbox" id="__nav_13" >
      
      <label class="md-nav__link" for="__nav_13">
        Programming
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Programming" data-md-level="1">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          Programming
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13_1" type="checkbox" id="__nav_13_1" >
      
      <label class="md-nav__link" for="__nav_13_1">
        General
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="General" data-md-level="2">
        <label class="md-nav__title" for="__nav_13_1">
          <span class="md-nav__icon md-icon"></span>
          General
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programming/general/stack/" class="md-nav__link">
        What is a stack?
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14" type="checkbox" id="__nav_14" >
      
      <label class="md-nav__link" for="__nav_14">
        Programming Languages
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Programming Languages" data-md-level="1">
        <label class="md-nav__title" for="__nav_14">
          <span class="md-nav__icon md-icon"></span>
          Programming Languages
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programming-Languages/Bash/" class="md-nav__link">
        Bash
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_2" type="checkbox" id="__nav_14_2" >
      
      <label class="md-nav__link" for="__nav_14_2">
        Go
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Go" data-md-level="2">
        <label class="md-nav__title" for="__nav_14_2">
          <span class="md-nav__icon md-icon"></span>
          Go
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programming-Languages/Go/Formatting/" class="md-nav__link">
        Formatting in Go
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programming-Languages/Go/Third-Party%20Tools%20or%20Libraries/" class="md-nav__link">
        Third-Party Tools or Libraries
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_3" type="checkbox" id="__nav_14_3" >
      
      <label class="md-nav__link" for="__nav_14_3">
        Python
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Python" data-md-level="2">
        <label class="md-nav__title" for="__nav_14_3">
          <span class="md-nav__icon md-icon"></span>
          Python
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programming-Languages/Python/Python/" class="md-nav__link">
        Python
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programming-Languages/Python/VirtualENVs/" class="md-nav__link">
        Python Virtual Environments
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programming-Languages/Python/typing-in-python/" class="md-nav__link">
        Typing in Python
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_3_4" type="checkbox" id="__nav_14_3_4" >
      
      <label class="md-nav__link" for="__nav_14_3_4">
        Python Libraries
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Python Libraries" data-md-level="3">
        <label class="md-nav__title" for="__nav_14_3_4">
          <span class="md-nav__icon md-icon"></span>
          Python Libraries
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programming-Languages/Python/Python-Libraries/FastAPI/" class="md-nav__link">
        FastAPI
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programming-Languages/Python/Python-Libraries/Pathlib/" class="md-nav__link">
        Pathlib
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_3_5" type="checkbox" id="__nav_14_3_5" >
      
      <label class="md-nav__link" for="__nav_14_3_5">
        Python Testing
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Python Testing" data-md-level="3">
        <label class="md-nav__title" for="__nav_14_3_5">
          <span class="md-nav__icon md-icon"></span>
          Python Testing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programming-Languages/Python/Python-Testing/PyTest/" class="md-nav__link">
        PyTest
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_3_6" type="checkbox" id="__nav_14_3_6" >
      
      <label class="md-nav__link" for="__nav_14_3_6">
        Pytest
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Pytest" data-md-level="3">
        <label class="md-nav__title" for="__nav_14_3_6">
          <span class="md-nav__icon md-icon"></span>
          Pytest
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programming-Languages/Python/pytest/fixtures/" class="md-nav__link">
        parameter to fixtures
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14_4" type="checkbox" id="__nav_14_4" >
      
      <label class="md-nav__link" for="__nav_14_4">
        Rust
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Rust" data-md-level="2">
        <label class="md-nav__title" for="__nav_14_4">
          <span class="md-nav__icon md-icon"></span>
          Rust
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Programming-Languages/Rust/Memory%20Management/" class="md-nav__link">
        Heat
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_15" type="checkbox" id="__nav_15" >
      
      <label class="md-nav__link" for="__nav_15">
        Tools
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Tools" data-md-level="1">
        <label class="md-nav__title" for="__nav_15">
          <span class="md-nav__icon md-icon"></span>
          Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/Anki/" class="md-nav__link">
        Anki
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/Bitwarden/" class="md-nav__link">
        Bitwarden
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/HashiCorp-Vault/" class="md-nav__link">
        HashiCorp Vault
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/KeepassXC/" class="md-nav__link">
        KeePassXC
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/MkDocs/" class="md-nav__link">
        MkDocs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/Readwise/" class="md-nav__link">
        Readwise
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/Task/" class="md-nav__link">
        Task
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/mermaid/" class="md-nav__link">
        Mermaid
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_15_9" type="checkbox" id="__nav_15_9" >
      
      <label class="md-nav__link" for="__nav_15_9">
        Git
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Git" data-md-level="2">
        <label class="md-nav__title" for="__nav_15_9">
          <span class="md-nav__icon md-icon"></span>
          Git
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/Git/bfg-repo-cleaner/" class="md-nav__link">
        Clean Git repositories with BFG
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/Git/git/" class="md-nav__link">
        Git
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_15_10" type="checkbox" id="__nav_15_10" >
      
      <label class="md-nav__link" for="__nav_15_10">
        PlantUML
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="PlantUML" data-md-level="2">
        <label class="md-nav__title" for="__nav_15_10">
          <span class="md-nav__icon md-icon"></span>
          PlantUML
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/PlantUML/PlantUML%20Themes/" class="md-nav__link">
        PlantUML Themes
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_15_11" type="checkbox" id="__nav_15_11" >
      
      <label class="md-nav__link" for="__nav_15_11">
        VS Code
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="VS Code" data-md-level="2">
        <label class="md-nav__title" for="__nav_15_11">
          <span class="md-nav__icon md-icon"></span>
          VS Code
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/VS-Code/Plugins/" class="md-nav__link">
        VS Code Plugins
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_15_12" type="checkbox" id="__nav_15_12" >
      
      <label class="md-nav__link" for="__nav_15_12">
        Vim
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Vim" data-md-level="2">
        <label class="md-nav__title" for="__nav_15_12">
          <span class="md-nav__icon md-icon"></span>
          Vim
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/Vim/Comment%20out%20code/" class="md-nav__link">
        Comment out code
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../../Tools/Vim/copy%20all/" class="md-nav__link">
        Copy all
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#local-configuration" class="md-nav__link">
    Local Configuration
  </a>
  
    <nav class="md-nav" aria-label="Local Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#leaf01" class="md-nav__link">
    leaf01
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exit01" class="md-nav__link">
    exit01
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#single-ebgp-session" class="md-nav__link">
    Single eBGP Session
  </a>
  
    <nav class="md-nav" aria-label="Single eBGP Session">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#spine01" class="md-nav__link">
    spine01
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#leaf01_1" class="md-nav__link">
    leaf01
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exit01_1" class="md-nav__link">
    exit01
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vxlan-setup" class="md-nav__link">
    VXLAN Setup
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/rwxd/wiki/edit/source/docs/content/Networking/FRR/Deploy VXLAN & EVPN.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="deploy-vxlan-evpn-with-frr">Deploy VXLAN &amp; EVPN with FRR<a class="headerlink" href="#deploy-vxlan-evpn-with-frr" title="Permanent link">⚑</a></h1>
<p>Topology used:
<img alt="Pasted image 20210725194142.png" src="../attachements/Pasted%20image%2020210725194142.png" /></p>
<h2 id="local-configuration">Local Configuration<a class="headerlink" href="#local-configuration" title="Permanent link">⚑</a></h2>
<h3 id="leaf01">leaf01<a class="headerlink" href="#leaf01" title="Permanent link">⚑</a></h3>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="err">au</span><span class="kc">t</span><span class="err">o</span> <span class="err">all</span>
<span class="linenos" data-linenos=" 2 "></span><span class="err">i</span><span class="kc">fa</span><span class="err">ce</span> <span class="err">lo</span> <span class="err">i</span><span class="kc">net</span> <span class="err">loopback</span>
<span class="linenos" data-linenos=" 3 "></span>    <span class="err">address</span> <span class="mf">10.0.0.11</span><span class="err">/</span><span class="mi">32</span>
<span class="linenos" data-linenos=" 4 "></span>    <span class="err">clagd</span><span class="mi">-</span><span class="err">vxla</span><span class="kc">n</span><span class="mi">-</span><span class="err">a</span><span class="kc">n</span><span class="err">ycas</span><span class="kc">t</span><span class="mi">-</span><span class="err">ip</span> <span class="mf">10.0.0.112</span>
<span class="linenos" data-linenos=" 5 "></span>    <span class="err">vxla</span><span class="kc">n</span><span class="mi">-</span><span class="err">local</span><span class="mi">-</span><span class="kc">tunnel</span><span class="err">ip</span> <span class="mf">10.0.0.11</span>
<span class="linenos" data-linenos=" 6 "></span>
<span class="linenos" data-linenos=" 7 "></span><span class="err">i</span><span class="kc">fa</span><span class="err">ce</span> <span class="err">v</span><span class="kc">n</span><span class="err">i</span><span class="mi">13</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="err">m</span><span class="kc">tu</span> <span class="mi">9164</span>
<span class="linenos" data-linenos=" 9 "></span>    <span class="err">vxla</span><span class="kc">n</span><span class="mi">-</span><span class="err">id</span> <span class="mi">13</span>
<span class="linenos" data-linenos="10 "></span>    <span class="err">bridge</span><span class="mi">-</span><span class="err">access</span> <span class="mi">13</span>
<span class="linenos" data-linenos="11 "></span>    <span class="err">bridge</span><span class="mi">-</span><span class="err">lear</span><span class="kc">n</span><span class="err">i</span><span class="kc">n</span><span class="err">g</span> <span class="err">o</span><span class="kc">ff</span>
<span class="linenos" data-linenos="12 "></span>
<span class="linenos" data-linenos="13 "></span><span class="err">i</span><span class="kc">fa</span><span class="err">ce</span> <span class="err">v</span><span class="kc">n</span><span class="err">i</span><span class="mi">24</span>
<span class="linenos" data-linenos="14 "></span>    <span class="err">m</span><span class="kc">tu</span> <span class="mi">9164</span>
<span class="linenos" data-linenos="15 "></span>    <span class="err">vxla</span><span class="kc">n</span><span class="mi">-</span><span class="err">id</span> <span class="mi">24</span>
<span class="linenos" data-linenos="16 "></span>    <span class="err">bridge</span><span class="mi">-</span><span class="err">access</span> <span class="mi">24</span>
<span class="linenos" data-linenos="17 "></span>    <span class="err">bridge</span><span class="mi">-</span><span class="err">lear</span><span class="kc">n</span><span class="err">i</span><span class="kc">n</span><span class="err">g</span> <span class="err">o</span><span class="kc">ff</span>
<span class="linenos" data-linenos="18 "></span>
<span class="linenos" data-linenos="19 "></span><span class="err">i</span><span class="kc">fa</span><span class="err">ce</span> <span class="err">vla</span><span class="kc">n</span><span class="mi">13</span>
<span class="linenos" data-linenos="20 "></span>    <span class="err">m</span><span class="kc">tu</span> <span class="mi">9164</span>
<span class="linenos" data-linenos="21 "></span>    <span class="err">address</span> <span class="mf">172.16.1.11</span><span class="err">/</span><span class="mi">24</span>
<span class="linenos" data-linenos="22 "></span>    <span class="err">address</span><span class="mi">-</span><span class="err">vir</span><span class="kc">tual</span> <span class="mi">44</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="kc">ff</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">13</span> <span class="mf">172.168.1.1</span><span class="err">/</span><span class="mi">24</span>
<span class="linenos" data-linenos="23 "></span>    <span class="err">vla</span><span class="kc">n</span><span class="mi">-</span><span class="err">id</span> <span class="mi">13</span>
<span class="linenos" data-linenos="24 "></span>    <span class="err">vla</span><span class="kc">n</span><span class="mi">-</span><span class="err">raw</span><span class="mi">-</span><span class="err">device</span><span class="mi">-</span><span class="err">bridge</span>
<span class="linenos" data-linenos="25 "></span>    <span class="err">vr</span><span class="kc">f</span> <span class="err">evp</span><span class="kc">n</span><span class="mi">-</span><span class="err">vr</span><span class="kc">f</span>
<span class="linenos" data-linenos="26 "></span>
<span class="linenos" data-linenos="27 "></span><span class="err">i</span><span class="kc">fa</span><span class="err">ce</span> <span class="err">vla</span><span class="kc">n</span><span class="mi">24</span>
<span class="linenos" data-linenos="28 "></span>    <span class="err">m</span><span class="kc">tu</span> <span class="mi">9164</span>
<span class="linenos" data-linenos="29 "></span>    <span class="err">address</span> <span class="mf">172.16.2.11</span><span class="err">/</span><span class="mi">24</span>
<span class="linenos" data-linenos="30 "></span>    <span class="err">address</span><span class="mi">-</span><span class="err">vir</span><span class="kc">tual</span> <span class="mi">44</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="kc">ff</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">13</span> <span class="mf">172.168.2.1</span><span class="err">/</span><span class="mi">24</span>
<span class="linenos" data-linenos="31 "></span>    <span class="err">vla</span><span class="kc">n</span><span class="mi">-</span><span class="err">id</span> <span class="mi">24</span>
<span class="linenos" data-linenos="32 "></span>    <span class="err">vla</span><span class="kc">n</span><span class="mi">-</span><span class="err">raw</span><span class="mi">-</span><span class="err">device</span><span class="mi">-</span><span class="err">bridge</span>
<span class="linenos" data-linenos="33 "></span>    <span class="err">vr</span><span class="kc">f</span> <span class="err">evp</span><span class="kc">n</span><span class="mi">-</span><span class="err">vr</span><span class="kc">f</span>
<span class="linenos" data-linenos="34 "></span>
<span class="linenos" data-linenos="35 "></span><span class="err">#</span> <span class="err">This</span> <span class="err">is</span> <span class="kc">t</span><span class="err">he</span> <span class="err">L</span><span class="mi">3</span> <span class="err">VNI</span> <span class="err">de</span><span class="kc">f</span><span class="err">i</span><span class="kc">n</span><span class="err">i</span><span class="kc">t</span><span class="err">io</span><span class="kc">n</span> <span class="kc">t</span><span class="err">ha</span><span class="kc">t</span> <span class="err">we</span> <span class="kc">nee</span><span class="err">d</span> <span class="kc">f</span><span class="err">or</span> <span class="err">symme</span><span class="kc">tr</span><span class="err">ic</span> <span class="err">co</span><span class="kc">nf</span><span class="err">igura</span><span class="kc">t</span><span class="err">io</span><span class="kc">n</span><span class="err">.</span>
<span class="linenos" data-linenos="36 "></span><span class="err">#</span> <span class="err">This</span> <span class="err">is</span> <span class="err">used</span> <span class="kc">t</span><span class="err">o</span> <span class="kc">trans</span><span class="err">por</span><span class="kc">t</span> <span class="kc">t</span><span class="err">he</span> <span class="err">EVPN</span><span class="mi">-</span><span class="err">rou</span><span class="kc">te</span><span class="err">d</span> <span class="err">packe</span><span class="kc">t</span> <span class="err">be</span><span class="kc">t</span><span class="err">wee</span><span class="kc">n</span> <span class="kc">t</span><span class="err">he</span> <span class="err">VTEPs.</span>
<span class="linenos" data-linenos="37 "></span>
<span class="linenos" data-linenos="38 "></span><span class="err">i</span><span class="kc">fa</span><span class="err">ce</span> <span class="err">vxla</span><span class="kc">n</span><span class="mi">4001</span>
<span class="linenos" data-linenos="39 "></span>    <span class="err">vxla</span><span class="kc">n</span><span class="mi">-</span><span class="err">id</span> <span class="mi">104001</span>
<span class="linenos" data-linenos="40 "></span>    <span class="err">vla</span><span class="kc">n</span><span class="mi">-</span><span class="err">raw</span><span class="mi">-</span><span class="err">device</span><span class="mi">-</span><span class="err">bridge</span>
<span class="linenos" data-linenos="41 "></span>
<span class="linenos" data-linenos="42 "></span><span class="err">i</span><span class="kc">fa</span><span class="err">ce</span> <span class="err">vla</span><span class="kc">n</span><span class="mi">4001</span>
<span class="linenos" data-linenos="43 "></span>    <span class="err">hwaddress</span> <span class="mi">44</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="mi">39</span><span class="p">:</span><span class="err">FF</span><span class="p">:</span><span class="mi">40</span><span class="p">:</span><span class="mi">94</span>
<span class="linenos" data-linenos="44 "></span>    <span class="err">vla</span><span class="kc">n</span><span class="mi">-</span><span class="err">id</span> <span class="mi">4001</span>
<span class="linenos" data-linenos="45 "></span>    <span class="err">vla</span><span class="kc">n</span><span class="mi">-</span><span class="err">raw</span><span class="mi">-</span><span class="err">device</span><span class="mi">-</span><span class="err">bridge</span>
<span class="linenos" data-linenos="46 "></span>    <span class="err">vr</span><span class="kc">f</span> <span class="err">evp</span><span class="kc">n</span><span class="mi">-</span><span class="err">vr</span><span class="kc">f</span>
</code></pre></div>
<p><code>clagd-vxlan-anycast-ip 10.0.0.112</code> configures the Cumulus-specific MLAG implementation, CLAG, by defining the shared VXLAN source tunnel's IP address. This is required because of the dual-attached servers.</p>
<p><code>vxlan-local-tunnelip 10.0.0.11</code> specifies the local source tunnel IP address to be used when CLAG isn't operational. When CLAG is operational, the address specified with <code>clagd-vxlan-anycast-ip</code> is used as the tunnel source IP address.</p>
<p><code>iface vni 13</code> each VXLAN VNI is represented by a device in the Linux kernel.</p>
<p><code>mtu 9164</code> VXLAN tunnel interfaces recommend using jumbo frames, so we set the MTU of the interface to 9164</p>
<p><code>bridge-access</code> maps the VNI to a local VLAN ID</p>
<p><code>bridge-learning off</code> because we don't want to enable learning of remote MAC addresses because we have EVPN. So we disable learning on the VNIs</p>
<p><code>iface vlan13</code> this defines the SVI for the VNIs - these are the VNIs for which the node supports routing</p>
<p><code>address 172.16.1.11/24</code> the unique IP address of this leaf on the specified VNI</p>
<p><code>address-virtual 44:39:39:ff:00:13 172.168.1.1/24</code> this is the secondary gateway IP address for the VNI. The address is shared across all the leaves that carry this VNI. Servers are configured to use this IP address as the default gateway address to allow a server to be attached to any rack and not have to change its default gateway configuration</p>
<p><code>vlan-raw-device-bridge</code> Linux allows the presence of multiple 802.1Q bridges on the same device. An interface is assigned to only one of the bridges and so there is no ambiguity on the link about the use of a VLAN.</p>
<p><code>iface vxlan4001</code> this is the L3 VNI used in symmetric routing</p>
<p><code>iface vlan4001</code> this is merely the local instantiation of the L3 VNI</p>
<h3 id="exit01">exit01<a class="headerlink" href="#exit01" title="Permanent link">⚑</a></h3>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span>interface lo
<span class="linenos" data-linenos=" 2 "></span>    ip address 10.0.0.101/32
<span class="linenos" data-linenos=" 3 "></span>!
<span class="linenos" data-linenos=" 4 "></span>interface swp3
<span class="linenos" data-linenos=" 5 "></span>    ip address 169.254.127.1/31
<span class="linenos" data-linenos=" 6 "></span>!
<span class="linenos" data-linenos=" 7 "></span>interface swp4.2
<span class="linenos" data-linenos=" 8 "></span>    ip address 169.254.254.1/31
<span class="linenos" data-linenos=" 9 "></span>!
<span class="linenos" data-linenos="10 "></span>interface swp4.3
<span class="linenos" data-linenos="11 "></span>    ip address 169.254.254.3/31
<span class="linenos" data-linenos="12 "></span>!
<span class="linenos" data-linenos="13 "></span>interface swp4.4
<span class="linenos" data-linenos="14 "></span>    ip address 169.254.254.5/31
<span class="linenos" data-linenos="15 "></span>!
<span class="linenos" data-linenos="16 "></span>vrf evpn-vrf
<span class="linenos" data-linenos="17 "></span>    vni 104001
<span class="linenos" data-linenos="18 "></span>!
<span class="linenos" data-linenos="19 "></span>! default VRF peering with the underlay and the firewall
</code></pre></div>
<h2 id="single-ebgp-session">Single eBGP Session<a class="headerlink" href="#single-ebgp-session" title="Permanent link">⚑</a></h2>
<h3 id="spine01">spine01<a class="headerlink" href="#spine01" title="Permanent link">⚑</a></h3>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span>interface lo
<span class="linenos" data-linenos=" 2 "></span>    ip address 10.0.0.21/32
<span class="linenos" data-linenos=" 3 "></span>!
<span class="linenos" data-linenos=" 4 "></span>router bgp 65000
<span class="linenos" data-linenos=" 5 "></span>    bgp router-id 10.0.0.21
<span class="linenos" data-linenos=" 6 "></span>    bgp bestpath as-path multipath-relax
<span class="linenos" data-linenos=" 7 "></span>    neighbor peer-group ISL
<span class="linenos" data-linenos=" 8 "></span>    neighbor ISL remote-as external
<span class="linenos" data-linenos=" 9 "></span>    neighbor swp1 interface peer-group ISL
<span class="linenos" data-linenos="10 "></span>    neighbor swp2 interface peer-group ISL
<span class="linenos" data-linenos="11 "></span>    neighbor swp3 interface peer-group ISL
<span class="linenos" data-linenos="12 "></span>    neighbor swp4 interface peer-group ISL
<span class="linenos" data-linenos="13 "></span>    neighbor swp5 interface peer-group ISL
<span class="linenos" data-linenos="14 "></span>    neighbor swp6 interface peer-group ISL
<span class="linenos" data-linenos="15 "></span>    address-family ipv4 unicast
<span class="linenos" data-linenos="16 "></span>        neighbor ISL activate
<span class="linenos" data-linenos="17 "></span>        redistribute connected route-map LOOPBACKS
<span class="linenos" data-linenos="18 "></span>    address-family l2vpn evpn
<span class="linenos" data-linenos="19 "></span>        neighbor ISL activate
<span class="linenos" data-linenos="20 "></span>!
<span class="linenos" data-linenos="21 "></span>route-map LOOPBACKS permit 10
<span class="linenos" data-linenos="22 "></span>    match interface lo
</code></pre></div>
<p><code>address-family l2vpn evpn</code> activates the l2vpn evpn address family to signal to its peers that it can process EVPN routes. This is not an indication that the spine is participating in the overlay. Required on all nodes that exchange EVPN information.</p>
<h3 id="leaf01_1">leaf01<a class="headerlink" href="#leaf01_1" title="Permanent link">⚑</a></h3>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span>interface lo
<span class="linenos" data-linenos=" 2 "></span>    ip address 10.0.0.11/32
<span class="linenos" data-linenos=" 3 "></span>!
<span class="linenos" data-linenos=" 4 "></span>! This VRF definition is needed only for symmetric EVPN routing
<span class="linenos" data-linenos=" 5 "></span>vrf evpn-vrf
<span class="linenos" data-linenos=" 6 "></span>    vni 104001
<span class="linenos" data-linenos=" 7 "></span>!
<span class="linenos" data-linenos=" 8 "></span>router bgp 65011
<span class="linenos" data-linenos=" 9 "></span>    bgp router-id 10.0.0.11
<span class="linenos" data-linenos="10 "></span>    bgp bestpath as-path multipath-relax
<span class="linenos" data-linenos="11 "></span>    neighbor fabric peer-group
<span class="linenos" data-linenos="12 "></span>    neighbor fabric remote-as external
<span class="linenos" data-linenos="13 "></span>    neighbor swp1 interface peer-group fabric
<span class="linenos" data-linenos="14 "></span>    neighbor swp2 interface peer-group fabric
<span class="linenos" data-linenos="15 "></span>    address-family ipv4 unicast
<span class="linenos" data-linenos="16 "></span>        neighbor fabric activate
<span class="linenos" data-linenos="17 "></span>        redistribute connected route-map LOOPBACKS
<span class="linenos" data-linenos="18 "></span>    !
<span class="linenos" data-linenos="19 "></span>    address-family l2vpn evpn
<span class="linenos" data-linenos="20 "></span>        neighbor fabric activate
<span class="linenos" data-linenos="21 "></span>        advertise-all-vni
<span class="linenos" data-linenos="22 "></span>    advertise-svi-ip
<span class="linenos" data-linenos="23 "></span>    !
<span class="linenos" data-linenos="24 "></span>!
<span class="linenos" data-linenos="25 "></span>route-map LOOPBACKS permit 10
<span class="linenos" data-linenos="26 "></span>    match interface lo
<span class="linenos" data-linenos="27 "></span>!
</code></pre></div>
<p><code>vrf evpn-vrf</code> this VRF definition is what distinguishes symmetric routing configuration from asymmetric routing in the configuration. This definition specifies the L3 VNI used by a VRF. Think of this mapping as the equivalent of the VLAN-VNI mapping.</p>
<p><code>advertise-all-vni</code> enables advertisement of EVPN information, specifically RT-2 and RT-3 routes. This is present only on leaves (border or normal).</p>
<p><code>advertise-svi-ip</code> needed for individual leaves to run <code>ping, traceroute</code> from the leaves on the evpn-vrf.</p>
<h3 id="exit01_1">exit01<a class="headerlink" href="#exit01_1" title="Permanent link">⚑</a></h3>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span>router bgp 65201
<span class="linenos" data-linenos=" 2 "></span>    bgp router-id 10.0.0.101
<span class="linenos" data-linenos=" 3 "></span>    bgp bestpath as-path multipath-relax
<span class="linenos" data-linenos=" 4 "></span>    neighbor fabric peer-group
<span class="linenos" data-linenos=" 5 "></span>    neighbor fabric remote-as external
<span class="linenos" data-linenos=" 6 "></span>    ! These two are peering with the spine
<span class="linenos" data-linenos=" 7 "></span>    neighbor swp1 interface peer-group fabric
<span class="linenos" data-linenos=" 8 "></span>    neighbor swp2 interface peer-group fabric
<span class="linenos" data-linenos=" 9 "></span>    ! This is peering with the firewall to announce the underlay
<span class="linenos" data-linenos="10 "></span>    ! routes to the edge router (via the firewall) and receive the
<span class="linenos" data-linenos="11 "></span>    ! default route from the edge router (also via the firewall)
<span class="linenos" data-linenos="12 "></span>    neighbor swp4.2 interface remote-as external
<span class="linenos" data-linenos="13 "></span>    address-family ipv4 unicast
<span class="linenos" data-linenos="14 "></span>        neighbor fabric activate
<span class="linenos" data-linenos="15 "></span>    neighbor swp4.2 activate
<span class="linenos" data-linenos="16 "></span>        neighbor swp4.2 allowas-in 1
<span class="linenos" data-linenos="17 "></span>        redistribute connected route-map LOOPBACKS
<span class="linenos" data-linenos="18 "></span>    !
<span class="linenos" data-linenos="19 "></span>    address-family l2vpn evpn
<span class="linenos" data-linenos="20 "></span>        neighbor fabric activate
<span class="linenos" data-linenos="21 "></span>        advertise-all-vni
<span class="linenos" data-linenos="22 "></span>    !
<span class="linenos" data-linenos="23 "></span>!
<span class="linenos" data-linenos="24 "></span>route-map LOOPBACKS permit 10
<span class="linenos" data-linenos="25 "></span>    match interface lo
<span class="linenos" data-linenos="26 "></span>!
<span class="linenos" data-linenos="27 "></span>! evpn vrf peering to announce default route to internal net
<span class="linenos" data-linenos="28 "></span>!
<span class="linenos" data-linenos="29 "></span>router bgp 65201 vrf evpn-vrf
<span class="linenos" data-linenos="30 "></span>    bgp router-id 10.0.0.101
<span class="linenos" data-linenos="31 "></span>    neighbor swp4.3 interface remote-as external
<span class="linenos" data-linenos="32 "></span>    address-family ipv4 unicast
<span class="linenos" data-linenos="33 "></span>        neighbor swp4.3 activate
<span class="linenos" data-linenos="34 "></span>        ! The following two network statements are for
<span class="linenos" data-linenos="35 "></span>        ! distributing the summarized route to the firewall
<span class="linenos" data-linenos="36 "></span>        aggregate-address 172.16.1.0/24 summary-only
<span class="linenos" data-linenos="37 "></span>        aggregate-address 172.16.2.0/24 summary-only
<span class="linenos" data-linenos="38 "></span>        neighbor swp4.3 allowas-in 1
<span class="linenos" data-linenos="39 "></span>        exit-address-family
<span class="linenos" data-linenos="40 "></span>    !
<span class="linenos" data-linenos="41 "></span>    ! This config ensures we advertise the default route
<span class="linenos" data-linenos="42 "></span>    ! as a type 5 route in EVPN in the main BGP instance.
<span class="linenos" data-linenos="43 "></span>    ! The firewall peering is to get the default route
<span class="linenos" data-linenos="44 "></span>    ! in the evpn-vrf from the internet-vrf. Firewall
<span class="linenos" data-linenos="45 "></span>    ! does not peer for l2vpn/evpn.
<span class="linenos" data-linenos="46 "></span>    !
<span class="linenos" data-linenos="47 "></span>    address-family l2vpn evpn
<span class="linenos" data-linenos="48 "></span>        advertise ipv4 unicast
<span class="linenos" data-linenos="49 "></span>!
<span class="linenos" data-linenos="50 "></span>! internet vrf peering to retrieve the default route from the
<span class="linenos" data-linenos="51 "></span>! internet facing router and give it to the firewall.
<span class="linenos" data-linenos="52 "></span>!
<span class="linenos" data-linenos="53 "></span>router bgp 65201 vrf internet-vrf
<span class="linenos" data-linenos="54 "></span>    bgp router-id 10.0.0.101
<span class="linenos" data-linenos="55 "></span>    bgp bestpath as-path multipath-relax
<span class="linenos" data-linenos="56 "></span>    neighbor internet peer-group
<span class="linenos" data-linenos="57 "></span>    neighbor internet remote-as external
<span class="linenos" data-linenos="58 "></span>    neighbor swp4.4 interface peer-group internet
<span class="linenos" data-linenos="59 "></span>    neighbor swp3 interface peer-group internet
<span class="linenos" data-linenos="60 "></span>    address-family ipv4 unicast
<span class="linenos" data-linenos="61 "></span>        neighbor internet activate
<span class="linenos" data-linenos="62 "></span>        neighbor swp4.4 allowas-in 1
<span class="linenos" data-linenos="63 "></span>    neighbor swp3 remove-private-AS
<span class="linenos" data-linenos="64 "></span>        redistribute connected route-map INTERNET
<span class="linenos" data-linenos="65 "></span>    !
<span class="linenos" data-linenos="66 "></span>!
<span class="linenos" data-linenos="67 "></span>route-map INTERNET permit 10
<span class="linenos" data-linenos="68 "></span>    match interface internet-vrf
<span class="linenos" data-linenos="69 "></span>!
</code></pre></div>
<p><code>router bgp 65201</code> this section deals with the underlay and the receiving of EVPN routes from the rest of the leaves. It also peers with the firewall to ensure that the underlay gets the default route.</p>
<p><code>router bgp 65201 vrf evpn-vrf</code> this VRF configuration on the exit leaf is required to advertise the default route in the evpn-vrf VRF.</p>
<p><code>aggregate-address 172.16.1.0/24 summary-only</code> instructs BGP to announce only the summarized route and do so only if there's at least one route in that subnet.</p>
<p><code>address-family l2vpn evpn</code> advertises the default route as an RT-5 EVPN route. No activate statement is required, because there are no neighbors with whom EVPN routes are to be exchanged in this VRF. The RT-5 route is announced in the underlay BGP session.</p>
<p><code>router bgp 65201 vrf internet-vrf</code> VRF configuration to interface with the edge route in the internet-vrf for connectivity to the outside world. The internet-vrf has no EVPN configuration, so there is no need to define an L3 VNI for the internet-vrf.</p>
<p><code>neighbor swp3 remove-private-AS</code> strips off all private ASNs before advertising the routes to the edge router.</p>
<p>When VXLAN is the virtual network overlay, BGP doesn't require any per-VRF peering, because the VNI in the packet encodes this information.</p>
<h2 id="vxlan-setup">VXLAN Setup<a class="headerlink" href="#vxlan-setup" title="Permanent link">⚑</a></h2>
<p>Each VXLAN is locally configured using a bridge for local virtual interfaces, like illustrated in the below schema. The bridge is taking care of the local MAC addresses (notably, using source-address learning) and the VXLAN interface takes care of the remote MAC addresses (received with BGP EVPN).</p>
<p><img alt="Pasted image 20210723211203.png" src="../../General/attachements/Pasted%20image%2020210723211203.png" /></p>
<p>VXLANs can be provisioned with the following script. Source-address learning is disabled as we will rely solely on BGP EVPN to synchronize FDBs between the hypervisors.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span>for vni in 100 200; do
<span class="linenos" data-linenos=" 2 "></span>    # Create VXLAN interface
<span class="linenos" data-linenos=" 3 "></span>    ip link add vxlan${vni} type vxlan
<span class="linenos" data-linenos=" 4 "></span>        id ${vni} \
<span class="linenos" data-linenos=" 5 "></span>        dstport 4789 \
<span class="linenos" data-linenos=" 6 "></span>        local 203.0.113.2 \
<span class="linenos" data-linenos=" 7 "></span>        nolearning
<span class="linenos" data-linenos=" 8 "></span>    # Create companion bridge
<span class="linenos" data-linenos=" 9 "></span>    brctl addbr br${vni}
<span class="linenos" data-linenos="10 "></span>    brctl addif br${vni} vxlan${vni}
<span class="linenos" data-linenos="11 "></span>    brctl stp br${vni} off
<span class="linenos" data-linenos="12 "></span>    ip link set up dev br${vni}
<span class="linenos" data-linenos="13 "></span>    ip link set up dev vxlan${vni}
<span class="linenos" data-linenos="14 "></span>done
<span class="linenos" data-linenos="15 "></span># Attach each VM to the appropriate segment
<span class="linenos" data-linenos="16 "></span>brctl addif br100 vnet10
<span class="linenos" data-linenos="17 "></span>brctl addif br100 vnet11
<span class="linenos" data-linenos="18 "></span>brctl addif br200 vnet12
</code></pre></div>
<p>The configuration of <em>FRR</em> is similar to the one used for a route reflector, except we use the <code>advertise-all-vni</code> directive to publish all local VNIs.</p>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span>router bgp 65000
<span class="linenos" data-linenos=" 2 "></span>  bgp router-id 203.0.113.2
<span class="linenos" data-linenos=" 3 "></span>  no bgp default ipv4-unicast
<span class="linenos" data-linenos=" 4 "></span>  neighbor fabric peer-group
<span class="linenos" data-linenos=" 5 "></span>  neighbor fabric remote-as 65000
<span class="linenos" data-linenos=" 6 "></span>  neighbor fabric capability extended-nexthop
<span class="linenos" data-linenos=" 7 "></span> ! BGP sessions with route reflectors
<span class="linenos" data-linenos=" 8 "></span>  neighbor 203.0.113.253 peer-group fabric
<span class="linenos" data-linenos=" 9 "></span>  neighbor 203.0.113.254 peer-group fabric
<span class="linenos" data-linenos="10 "></span> !
<span class="linenos" data-linenos="11 "></span>  address-family l2vpn evpn
<span class="linenos" data-linenos="12 "></span>   neighbor fabric activate
<span class="linenos" data-linenos="13 "></span>   advertise-all-vni
<span class="linenos" data-linenos="14 "></span> exit-address-family !
<span class="linenos" data-linenos="15 "></span>!
</code></pre></div>
<p>FRR should also be able to retrieve information about the local MAC addresses. Each VTEP has to establish a BGP session with the route reflectors.</p>
<h1 id="bgp-evpn-ethernet-virtual-private-network">BGP EVPN (Ethernet Virtual Private Network)<a class="headerlink" href="#bgp-evpn-ethernet-virtual-private-network" title="Permanent link">⚑</a></h1>
<h3 id="route-reflector-setup-using-frr">Route reflector setup using FRR<a class="headerlink" href="#route-reflector-setup-using-frr" title="Permanent link">⚑</a></h3>
<p>The configuration is pretty simple. We suppose the configured route reflector has <code>203.0.113.254</code> configured as a loopback IP.
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="err">rou</span><span class="kc">ter</span> <span class="err">bgp</span> <span class="mi">65000</span>
<span class="linenos" data-linenos=" 2 "></span>  <span class="err">bgp</span> <span class="err">rou</span><span class="kc">ter</span><span class="mi">-</span><span class="err">id</span> <span class="mf">203.0.113.254</span>
<span class="linenos" data-linenos=" 3 "></span>  <span class="err">bgp</span> <span class="err">clus</span><span class="kc">ter</span><span class="mi">-</span><span class="err">id</span> <span class="mf">203.0.113.254</span>
<span class="linenos" data-linenos=" 4 "></span>  <span class="err">bgp</span> <span class="err">log</span><span class="mi">-</span><span class="kc">ne</span><span class="err">ighbor</span><span class="mi">-</span><span class="err">cha</span><span class="kc">n</span><span class="err">ges</span>
<span class="linenos" data-linenos=" 5 "></span>  <span class="kc">n</span><span class="err">o</span> <span class="err">bgp</span> <span class="err">de</span><span class="kc">fault</span> <span class="err">ipv</span><span class="mi">4-</span><span class="err">u</span><span class="kc">n</span><span class="err">icas</span><span class="kc">t</span>
<span class="linenos" data-linenos=" 6 "></span>  <span class="kc">ne</span><span class="err">ighbor</span> <span class="kc">fa</span><span class="err">bric</span> <span class="err">peer</span><span class="mi">-</span><span class="err">group</span>
<span class="linenos" data-linenos=" 7 "></span>  <span class="kc">ne</span><span class="err">ighbor</span> <span class="kc">fa</span><span class="err">bric</span> <span class="err">remo</span><span class="kc">te</span><span class="mi">-</span><span class="err">as</span> <span class="mi">65000</span>
<span class="linenos" data-linenos=" 8 "></span>  <span class="kc">ne</span><span class="err">ighbor</span> <span class="kc">fa</span><span class="err">bric</span> <span class="err">capabili</span><span class="kc">t</span><span class="err">y</span> <span class="err">ex</span><span class="kc">ten</span><span class="err">ded</span><span class="mi">-</span><span class="kc">ne</span><span class="err">x</span><span class="kc">t</span><span class="err">hop</span>
<span class="linenos" data-linenos=" 9 "></span>  <span class="kc">ne</span><span class="err">ighbor</span> <span class="kc">fa</span><span class="err">bric</span> <span class="err">upda</span><span class="kc">te</span><span class="mi">-</span><span class="err">source</span> <span class="mf">203.0.113.254</span>
<span class="linenos" data-linenos="10 "></span>  <span class="err">bgp</span> <span class="err">lis</span><span class="kc">ten</span> <span class="err">ra</span><span class="kc">n</span><span class="err">ge</span> <span class="mf">203.0.113.0</span><span class="err">/</span><span class="mi">24</span> <span class="err">peer</span><span class="mi">-</span><span class="err">group</span> <span class="kc">fa</span><span class="err">bric</span>
<span class="linenos" data-linenos="11 "></span> <span class="err">!</span>
<span class="linenos" data-linenos="12 "></span>  <span class="err">address</span><span class="mi">-</span><span class="kc">fa</span><span class="err">mily</span> <span class="err">l</span><span class="mi">2</span><span class="err">vp</span><span class="kc">n</span> <span class="err">evp</span><span class="kc">n</span>
<span class="linenos" data-linenos="13 "></span>   <span class="kc">ne</span><span class="err">ighbor</span> <span class="kc">fa</span><span class="err">bric</span> <span class="err">ac</span><span class="kc">t</span><span class="err">iva</span><span class="kc">te</span>
<span class="linenos" data-linenos="14 "></span>   <span class="kc">ne</span><span class="err">ighbor</span> <span class="kc">fa</span><span class="err">bric</span> <span class="err">rou</span><span class="kc">te</span><span class="mi">-</span><span class="err">re</span><span class="kc">fle</span><span class="err">c</span><span class="kc">t</span><span class="err">or</span><span class="mi">-</span><span class="err">clie</span><span class="kc">nt</span>
<span class="linenos" data-linenos="15 "></span>  <span class="err">exi</span><span class="kc">t</span><span class="mi">-</span><span class="err">address</span><span class="mi">-</span><span class="kc">fa</span><span class="err">mily</span>
<span class="linenos" data-linenos="16 "></span> <span class="err">!</span>
<span class="linenos" data-linenos="17 "></span><span class="err">!</span>
</code></pre></div></p>
<p>A peer group <code>fabric</code> is defined and we leverage the dynamic neighbor feature of FRR: we don’t have to explicitly define each neighbor. Any client from <code>203.0.113.0/24</code> and presenting itself as part of AS 65000 can connect. All sent EVPN routes will be accepted and reflected to the other clients.</p>
<h3 id="using-junos">Using Junos<a class="headerlink" href="#using-junos" title="Permanent link">⚑</a></h3>
<div class="highlight"><pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="err">i</span><span class="kc">nterfa</span><span class="err">ces</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 2 "></span>    <span class="err">lo</span><span class="mi">0</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 3 "></span>        <span class="err">u</span><span class="kc">n</span><span class="err">i</span><span class="kc">t</span> <span class="mi">0</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 4 "></span>            <span class="kc">fa</span><span class="err">mily</span> <span class="err">i</span><span class="kc">net</span> <span class="p">{</span>
<span class="linenos" data-linenos=" 5 "></span>                <span class="err">address</span> <span class="mf">203.0.113.254</span><span class="err">/</span><span class="mi">32</span><span class="err">;</span>
<span class="linenos" data-linenos=" 6 "></span>            <span class="p">}</span>
<span class="linenos" data-linenos=" 7 "></span>        <span class="p">}</span>
<span class="linenos" data-linenos=" 8 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos=" 9 "></span><span class="p">}</span>
<span class="linenos" data-linenos="10 "></span>
<span class="linenos" data-linenos="11 "></span><span class="err">pro</span><span class="kc">t</span><span class="err">ocols</span> <span class="p">{</span>
<span class="linenos" data-linenos="12 "></span>    <span class="err">bgp</span> <span class="p">{</span>
<span class="linenos" data-linenos="13 "></span>        <span class="err">group</span> <span class="kc">fa</span><span class="err">bric</span> <span class="p">{</span>
<span class="linenos" data-linenos="14 "></span>            <span class="kc">fa</span><span class="err">mily</span> <span class="err">evp</span><span class="kc">n</span> <span class="p">{</span>
<span class="linenos" data-linenos="15 "></span>                <span class="err">sig</span><span class="kc">nal</span><span class="err">i</span><span class="kc">n</span><span class="err">g</span> <span class="p">{</span>
<span class="linenos" data-linenos="16 "></span>                    <span class="err">/*</span> <span class="err">Do</span> <span class="kc">n</span><span class="err">o</span><span class="kc">t</span> <span class="kc">tr</span><span class="err">y</span> <span class="kc">t</span><span class="err">o</span> <span class="err">i</span><span class="kc">nstall</span> <span class="err">EVPN</span> <span class="err">rou</span><span class="kc">tes</span> <span class="err">*/</span>
<span class="linenos" data-linenos="17 "></span>                    <span class="kc">n</span><span class="err">o</span><span class="mi">-</span><span class="err">i</span><span class="kc">nstall</span><span class="err">;</span>
<span class="linenos" data-linenos="18 "></span>                <span class="p">}</span>
<span class="linenos" data-linenos="19 "></span>            <span class="p">}</span>
<span class="linenos" data-linenos="20 "></span>            <span class="kc">t</span><span class="err">ype</span> <span class="err">i</span><span class="kc">nternal</span><span class="err">;</span>
<span class="linenos" data-linenos="21 "></span>            <span class="err">clus</span><span class="kc">ter</span> <span class="mf">203.0.113.254</span><span class="err">;</span>
<span class="linenos" data-linenos="22 "></span>            <span class="err">local</span><span class="mi">-</span><span class="err">address</span> <span class="mf">203.0.113.254</span><span class="err">;</span>
<span class="linenos" data-linenos="23 "></span>            <span class="err">allow</span> <span class="mf">203.0.113.0</span><span class="err">/</span><span class="mi">24</span><span class="err">;</span>
<span class="linenos" data-linenos="24 "></span>        <span class="p">}</span>
<span class="linenos" data-linenos="25 "></span>    <span class="p">}</span>
<span class="linenos" data-linenos="26 "></span><span class="p">}</span>
<span class="linenos" data-linenos="27 "></span>
<span class="linenos" data-linenos="28 "></span><span class="err">rou</span><span class="kc">t</span><span class="err">i</span><span class="kc">n</span><span class="err">g</span><span class="mi">-</span><span class="err">op</span><span class="kc">t</span><span class="err">io</span><span class="kc">ns</span> <span class="p">{</span>
<span class="linenos" data-linenos="29 "></span>    <span class="err">rou</span><span class="kc">ter</span><span class="mi">-</span><span class="err">id</span> <span class="mf">203.0.113.254</span><span class="err">;</span>
<span class="linenos" data-linenos="30 "></span>    <span class="err">au</span><span class="kc">t</span><span class="err">o</span><span class="kc">n</span><span class="err">omous</span><span class="mi">-</span><span class="err">sys</span><span class="kc">te</span><span class="err">m</span> <span class="mi">65000</span><span class="err">;</span>
<span class="linenos" data-linenos="31 "></span><span class="p">}</span>
</code></pre></div>
<h2 id="arp-suppression">ARP suppression<a class="headerlink" href="#arp-suppression" title="Permanent link">⚑</a></h2>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../../EVE-NG/KVM%20Setup/" class="md-footer__link md-footer__link--prev" aria-label="Previous: KVM Setup for EVE-NG" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              KVM Setup for EVE-NG
            </div>
          </div>
        </a>
      
      
        
        <a href="../../General/NETCONF/" class="md-footer__link md-footer__link--next" aria-label="Next: Overview" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Overview
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2021 rwxd
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/rwxd" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.409db549.min.js", "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.756773cc.min.js"></script>
      
    
  </body>
</html>